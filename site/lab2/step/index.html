
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../theory/">
      
      
        <link rel="next" href="../submit/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.10">
    
    
      
        <title>实验步骤 - 计算机体系结构实验（2023） | 哈工大（深圳）</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="red">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="计算机体系结构实验（2023） | 哈工大（深圳）" class="md-header__button md-logo" aria-label="计算机体系结构实验（2023） | 哈工大（深圳）" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c-35.3 0-64 28.7-64 64H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40c0 35.3 28.7 64 64 64v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40c35.3 0 64-28.7 64-64h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40c0-35.3-28.7-64-64-64V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24zm-16 104h192c17.7 0 32 14.3 32 32v192c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm192 32H160v192h192V160z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            计算机体系结构实验（2023） | 哈工大（深圳）
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              实验步骤
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="red"  aria-label="切换到夜晚模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换到夜晚模式" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="red"  aria-label="切换到白天模式"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="切换到白天模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  首页

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../lab1/overview/" class="md-tabs__link">
          
  
  实验1：AI系统实践专题

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../overview/" class="md-tabs__link">
          
  
  实验2：AI感知模型部署与测试

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="计算机体系结构实验（2023） | 哈工大（深圳）" class="md-nav__button md-logo" aria-label="计算机体系结构实验（2023） | 哈工大（深圳）" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c-35.3 0-64 28.7-64 64H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40c0 35.3 28.7 64 64 64v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40c35.3 0 64-28.7 64-64h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40c0-35.3-28.7-64-64-64V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24zm-16 104h192c17.7 0 32 14.3 32 32v192c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm192 32H160v192h192V160z"/></svg>

    </a>
    计算机体系结构实验（2023） | 哈工大（深圳）
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    首页
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            首页
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验须知
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../homewk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    作业提交说明
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    实验1：AI系统实践专题
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            实验1：AI系统实践专题
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab1/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验概述
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab1/theory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验原理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab1/step/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验步骤
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab1/submit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    验收与提交
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    实验2：AI感知模型部署与测试
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            实验2：AI感知模型部署与测试
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验概述
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../theory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验原理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    实验步骤
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    实验步骤
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      任务一
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      部署感知模型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="部署感知模型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step1-apollo" class="md-nav__link">
    <span class="md-ellipsis">
      step1: 进入apollo容器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step2" class="md-nav__link">
    <span class="md-ellipsis">
      step2: 安装模型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step3" class="md-nav__link">
    <span class="md-ellipsis">
      step3: 修改配置文件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      运行感知模块
    </span>
  </a>
  
    <nav class="md-nav" aria-label="运行感知模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step4-apollo-dreamview" class="md-nav__link">
    <span class="md-ellipsis">
      step4: 启动Apollo DreamView
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step5-perceptiontransform" class="md-nav__link">
    <span class="md-ellipsis">
      step5: 启动Perception和Transform模块
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      基于数据包验证感知结果
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基于数据包验证感知结果">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step6" class="md-nav__link">
    <span class="md-ellipsis">
      step6: 播放测试数据包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step7" class="md-nav__link">
    <span class="md-ellipsis">
      step7: 查看感知结果
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#carlaapollo" class="md-nav__link">
    <span class="md-ellipsis">
      任务二：基于Carla和Apollo联合仿真验证感知结果（第二次实验课）
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../submit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    验收与提交
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      任务一
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      部署感知模型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="部署感知模型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step1-apollo" class="md-nav__link">
    <span class="md-ellipsis">
      step1: 进入apollo容器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step2" class="md-nav__link">
    <span class="md-ellipsis">
      step2: 安装模型
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step3" class="md-nav__link">
    <span class="md-ellipsis">
      step3: 修改配置文件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      运行感知模块
    </span>
  </a>
  
    <nav class="md-nav" aria-label="运行感知模块">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step4-apollo-dreamview" class="md-nav__link">
    <span class="md-ellipsis">
      step4: 启动Apollo DreamView
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step5-perceptiontransform" class="md-nav__link">
    <span class="md-ellipsis">
      step5: 启动Perception和Transform模块
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      基于数据包验证感知结果
    </span>
  </a>
  
    <nav class="md-nav" aria-label="基于数据包验证感知结果">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step6" class="md-nav__link">
    <span class="md-ellipsis">
      step6: 播放测试数据包
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step7" class="md-nav__link">
    <span class="md-ellipsis">
      step7: 查看感知结果
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#carlaapollo" class="md-nav__link">
    <span class="md-ellipsis">
      任务二：基于Carla和Apollo联合仿真验证感知结果（第二次实验课）
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="_1">实验步骤</h1>
<h2 id="_2">任务一</h2>
<h2 id="_3">部署感知模型</h2>
<h3 id="step1-apollo">step1: 进入apollo容器</h3>
<p>在 Ubuntu 系统中打开命令行工具，进入~/apollo 目录，执行启动 docker 环境指令。
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/apollo<span class="w"> </span>
sudo<span class="w"> </span>bash<span class="w"> </span>./docker/scripts/dev_start.sh<span class="w">   </span><span class="c1"># 首次运行后，加-l参数可以节省时间</span>
</code></pre></div>
启动成功后，会提示【OK】Enjoy！操作示意如图所示：
<center><img src="../assets/enjoy.png" width = 600></center>
在当前路径下，启动 docker 环境成功后，执行进入 docker 环境指令。
<div class="highlight"><pre><span></span><code>sudo bash ./docker/scripts/dev_into.sh
</code></pre></div>
<strong>注意：任务一中的命令都需要在apollo容器内执行，可以通过终端的用户名判断是否在容器内</strong></p>
<p>容器外：
<center><img src="../assets/容器外.png" width = 600></center>
容器内：
<center><img src="../assets/容器内.png" width = 600></center></p>
<h3 id="step2">step2: 安装模型</h3>
<p>通过以下命令把训练好的模型部署到Apollo，其中<code>SMOKE_paddle.zip</code>是训练好的模型打包文件。执行完成命令之后，提示安装成功，则表示模型安装成功。
<div class="highlight"><pre><span></span><code>python3<span class="w"> </span>modules/tools/amodel/amodel.py<span class="w"> </span>install<span class="w"> </span>SMOKE_paddle.zip
</code></pre></div>
模型部署工具使用方式可以参考 <strong>/apollo/modules/tools/amodel/readme.md</strong>。</p>
<h3 id="step3">step3: 修改配置文件</h3>
<p>模型文件会被安装至/apollo/modules/perception/production/data/perception/camera/models/yolo_obstacle_detector/目录下，使用vscode修改该路径下的 smoke-config.pt 配置文件中的下述内容（需要修改模型的类型、权重参数文件路径，模型的结构，输入输出的接口）：
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">model_param {</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">model_name</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;./3d-r4-half_caffe&quot;</span>
<span class="w">  </span><span class="nt">model_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PaddleNet&quot;</span>
<span class="w">  </span><span class="nt">weight_file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;../SMOKE_paddle/smoke.pdiparams&quot;</span>
<span class="w">  </span><span class="nt">proto_file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;../SMOKE_paddle/smoke.pdmodel&quot;</span>
<span class="w">  </span><span class="nt">anchors_file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;anchors.txt&quot;</span>
<span class="w">  </span><span class="nt">types_file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;types.txt&quot;</span>
<span class="w">  </span><span class="nt">calibratetable_root</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;./3d-r4-half_caffe&quot;</span>
<span class="w">  </span><span class="nt">confidence_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.25</span>
<span class="w">  </span><span class="nt">offset_ratio</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">  </span><span class="nt">cropped_ratio</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.185185185185</span>
<span class="w">  </span><span class="nt">resized_width</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">960</span>
<span class="w">  </span><span class="nt">aligned_pixel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">32</span>
<span class="w">  </span><span class="nt">min_2d_height</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">  </span><span class="nt">min_3d_height</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">  </span><span class="nt">ori_cycle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">with_box3d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">light_swt_conf_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">  </span><span class="nt">light_vis_conf_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">  </span><span class="nt">with_lights</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">with_ratios</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="c1"># num_areas: 4</span>
<span class="w">  </span><span class="nt">border_ratio</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.01</span>
<span class="err">}</span>
<span class="l l-Scalar l-Scalar-Plain">net_param {</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">det1_loc_blob</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;concat_8.tmp_0&quot;</span>
<span class="w">  </span><span class="nt">det1_obj_blob</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;obj_pred&quot;</span>
<span class="w">  </span><span class="nt">det1_cls_blob</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cls_pred&quot;</span>
<span class="w">  </span><span class="nt">det1_ori_blob</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ori_pred&quot;</span>
<span class="w">  </span><span class="nt">det1_dim_blob</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;dim_pred&quot;</span>
<span class="w">  </span><span class="nt">input_data_blob</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;images&quot;</span>
<span class="w">  </span><span class="nt">input_ratio_blob</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;down_ratios&quot;</span>
<span class="w">  </span><span class="nt">input_instric_blob</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;trans_cam_to_img&quot;</span>
<span class="w">  </span><span class="nt">feat_blob</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;conv3_3&quot;</span>
<span class="err">}</span>
<span class="l l-Scalar l-Scalar-Plain">nms_param {</span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;NormalNMS&quot;</span>
<span class="w">  </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">  </span><span class="nt">sigma</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.4</span>
<span class="w">  </span><span class="nt">inter_cls_nms_thresh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6</span>
<span class="err">}</span>
</code></pre></div></p>
<h2 id="_4">运行感知模块</h2>
<h3 id="step4-apollo-dreamview">step4: 启动Apollo DreamView</h3>
<p>在Apollo容器内启动DreamView。DreamView是自动驾驶系统的可视化界面。
<div class="highlight"><pre><span></span><code>bash<span class="w"> </span>scripts/bootstrap.sh<span class="w"> </span>
</code></pre></div>
可能遇到的问题：
<center><img src="../assets/fail.png" width = 600></center>
重启dreamview
<div class="highlight"><pre><span></span><code>bash scripts/bootstrap.sh  restart
</code></pre></div>
打开浏览器输入<code>http://localhost:8888/</code>地址出现DreamView页面，选择正确的模式、车型、地图。
<img alt="image" src="../assets/dv_task.png" /></p>
<h3 id="step5-perceptiontransform">step5: 启动Perception和Transform模块</h3>
<p>点击Dreamview左侧状态栏 Module Controller 模块启动 transform 模块：
<center><img src="../assets/trans.png" width = 600></center>
或在终端启动：
<div class="highlight"><pre><span></span><code><span class="nb">source</span><span class="w"> </span>/apollo/cyber/setup.bash
cyber_launch<span class="w"> </span>start<span class="w"> </span>/apollo/modules/transform/launch/static_transform.launch
</code></pre></div>
启动感知perception模块的camera功能
<div class="highlight"><pre><span></span><code># 打开新终端，重新用dev_into.sh进入Apollo容器
sudo bash ./docker/scripts/dev_into.sh
source /apollo/cyber/setup.bash
mainboard -d /apollo/modules/perception/production/dag/dag_streaming_perception_camera.dag
</code></pre></div></p>
<h2 id="_5">基于数据包验证感知结果</h2>
<h3 id="step6">step6: 播放测试数据包</h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Apollo容器内</span>
<span class="nb">source</span><span class="w"> </span>/apollo/cyber/setup.bash
<span class="c1"># 播放数据包：需要使用 -k 参数屏蔽掉数据包中包含的感知通道数据,-p   参数提前加载数据包，使回放更加流畅。</span>
cyber_recorder<span class="w"> </span>play<span class="w"> </span>-p<span class="w"> </span><span class="m">10</span><span class="w"> </span>-f<span class="w"> </span>./data/bag/sensor_rgb.record<span class="w"> </span>-k<span class="w"> </span>/apollo/sensor/camera/front_12mm/image<span class="w"> </span>/apollo/sensor/camera/rear_6mm/image<span class="w"> </span>/perception/vehicle/obstacles<span class="w"> </span>/apollo/prediction/perception_obstacles<span class="w"> </span>/apollo/perception/obstacles<span class="w"> </span>/perception/obstacles<span class="w"> </span>/apollo/prediction
</code></pre></div>
<h3 id="step7">step7: 查看感知结果</h3>
<p>可视化结果输出：在 DreamView 中查看感知结果。
将 Tasks 中的 Lock Task Panel按钮关闭，Camera Sensor 按钮打开，在 Camera View 中选择相应的相机通道数据。
<img alt="image" src="../assets/dv_camera.png" />
<center><img src="../assets/可视化.png" width = 800></center>
可能遇到的问题：没有可视化结果
查看刚才执行
<code>mainboard -d /apollo/modules/perception/production/dag/dag_streaming_perception_camera.dag</code>的终端,输出报错如下。这是因为已经播放过一次数据包了，第二次播放时，apollo认为收到了过期的旧数据，没有进行识别。
<center><img src="../assets/perror.png" width = 800></center>
解决办法：crtl+c关闭感知模块，重新启动
<div class="highlight"><pre><span></span><code>mainboard -d /apollo/modules/perception/production/dag/dag_streaming_perception_camera.dag
</code></pre></div></p>
<h2 id="carlaapollo">任务二：基于Carla和Apollo联合仿真验证感知结果（第二次实验课）</h2>




<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Comment system -->



                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 - 2024 哈尔滨工业大学（深圳）
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>