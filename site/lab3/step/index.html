
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.10">
    
    
      
        <title>任务0：熟悉Apollo planning模块（2学时） - 计算机体系结构实验（2023） | 哈工大（深圳）</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fad675c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="red">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#0apollo-planning2" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="计算机体系结构实验（2023） | 哈工大（深圳）" class="md-header__button md-logo" aria-label="计算机体系结构实验（2023） | 哈工大（深圳）" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c-35.3 0-64 28.7-64 64H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40c0 35.3 28.7 64 64 64v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40c35.3 0 64-28.7 64-64h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40c0-35.3-28.7-64-64-64V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24zm-16 104h192c17.7 0 32 14.3 32 32v192c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm192 32H160v192h192V160z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            计算机体系结构实验（2023） | 哈工大（深圳）
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              任务0：熟悉Apollo planning模块（2学时）
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="red"  aria-label="切换到夜晚模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换到夜晚模式" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="red"  aria-label="切换到白天模式"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="切换到白天模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  首页

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../lab1/overview/" class="md-tabs__link">
          
  
  实验1：AI系统实践专题

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../lab2/overview/" class="md-tabs__link">
          
  
  实验2：AI感知模型部署与测试

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="计算机体系结构实验（2023） | 哈工大（深圳）" class="md-nav__button md-logo" aria-label="计算机体系结构实验（2023） | 哈工大（深圳）" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40c-35.3 0-64 28.7-64 64H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40v56H24c-13.3 0-24 10.7-24 24s10.7 24 24 24h40c0 35.3 28.7 64 64 64v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40h56v40c0 13.3 10.7 24 24 24s24-10.7 24-24v-40c35.3 0 64-28.7 64-64h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40v-56h40c13.3 0 24-10.7 24-24s-10.7-24-24-24h-40c0-35.3-28.7-64-64-64V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24c0-13.3-10.7-24-24-24s-24 10.7-24 24v40h-56V24zm-16 104h192c17.7 0 32 14.3 32 32v192c0 17.7-14.3 32-32 32H160c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32zm192 32H160v192h192V160z"/></svg>

    </a>
    计算机体系结构实验（2023） | 哈工大（深圳）
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    首页
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            首页
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验须知
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../homewk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    作业提交说明
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    实验1：AI系统实践专题
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            实验1：AI系统实践专题
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab1/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验概述
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab1/theory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验原理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab1/step/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验步骤
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab1/submit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    验收与提交
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    实验2：AI感知模型部署与测试
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            实验2：AI感知模型部署与测试
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab2/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验概述
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab2/theory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验原理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab2/step/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    实验步骤
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lab2/submit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    验收与提交
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      实验目的
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      实验步骤
    </span>
  </a>
  
    <nav class="md-nav" aria-label="实验步骤">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      总体流程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      具体步骤
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="0apollo-planning2">任务0：熟悉Apollo planning模块（2学时）</h1>
<h2 id="_1">实验目的</h2>
<p>&emsp;&emsp;(1) 熟悉 Apollo 软件系统的启动方法，掌握 Dreamview 交互系统使用</p>
<p>&emsp;&emsp;(2) 熟悉 Apollo 软件系统工作流程，掌握系统调试工具的 cyber_monitor 使用</p>
<p>&emsp;&emsp;(3) 掌握通过 sim_control模块对 Apollo 软件代码的仿真调试方法</p>
<h2 id="_2">实验步骤</h2>
<h3 id="_3">总体流程</h3>
<p><img alt="图片描述" src="../assets/task0-overview.png" /></p>
<h3 id="_4">具体步骤</h3>
<p>（1）启动 DreamView 可视化交互系统
在 Ubuntu 系统中打开命令行工具，进入/apollo 目录，执行启动 docker 环境指令。
<div class="highlight"><pre><span></span><code>cd ~/apollo 
sudo bash dev_start.sh -l
</code></pre></div>
启动成功后，会提示<code>【OK】Enjoy！</code>操作示意如图 1 所示：</p>
<p><img alt="图片描述" src="../assets/task0-devstart.png" /></p>
<p>在当前路径下，启动 docker 环境成功后，执行进入 docker 环境指令。
<div class="highlight"><pre><span></span><code>sudo bash dev_into.sh
</code></pre></div>
<img alt="图片描述" src="../assets/task0-devinto.png" /></p>
<p>在 docker 环境中执行启动 dreamview 指令。
<div class="highlight"><pre><span></span><code>bash scripts/bootstrap.sh 
</code></pre></div>
如下图所示，启动成功后，终端串口会显示『Dreamview is running at <a href="http://localhost:8888">http://localhost:8888</a>』, 
若出现『Module dreamview is already running - skipping.』提示，则表示上一次运行 Dreamview 
没有正常关闭，Dreamview 仍在运行中，此时可执行关闭 Dreamview 指令，待关闭完成之后， 
重新执行启动 Dreamview 指令即可。</p>
<p>关闭 Dreamview 指令如下：
<div class="highlight"><pre><span></span><code>bash scripts/bootstrap.sh stop
</code></pre></div>
<img alt="图片描述" src="../assets/task0-bootstrap.png" />
通过浏览器打开网址：<a href="http://localhost:8888">http://localhost:8888</a>，可以正常访问页面
<img alt="图片描述" src="../assets/task0-dreamview.png" />
（2）启动sim_control</p>
<p>如下图所示，按照指引完成，选择模式：【Contest Debug】，选择车型：【Mkz Example】，选择地图：【Apollo Map】，开启【Sim Control】开关
<img alt="图片描述" src="../assets/task0-mode.png" />
正确选择后，可以在中间区域看到有一辆自动驾驶主车出现。
点击网页端左侧【Module Controller】 栏，启动需要调试的模块进程，如下图所示，我们选择 planning、 prediction、routing 和sim obstacle模块</p>
<p><img alt="图片描述" src="../assets/task0-module.png" /></p>
<p>选择左侧的【route editing】可以设置车辆的起始点和出发点。
<img alt="图片描述" src="../assets/task0-routing.png" /></p>
<p>成功后可以看到，自动驾驶车辆能够出现路由（红色细线）以及规划轨迹（青绿色宽色的线），同时车能够在地图中行驶运动。
<img alt="图片描述" src="../assets/task0-planning.png" />
（3）使用<code>cyber_monitor</code>查看各模块通道数据
在命令行里面，docker容器环境下执行命令
<div class="highlight"><pre><span></span><code>#第一次使用，需要执行
source cyber/setup.bash 
#之后只需要执行
cyber_monitor
</code></pre></div>
如下图所示，可以使用光标，前后左右键查看各通道数据。
<img alt="图片描述" src="../assets/task0-cyber_monitor.png" /></p>
<p>（4）执行障碍物绕行任务
通过地图缩放方式，在下图箭头所指处，可以找到预先设置好的障碍物。
<img alt="图片描述" src="../assets/task0-routing_task_obstacles.png" /></p>
<p>执行一次绕行障碍物的路由请求
<img alt="图片描述" src="../assets/task0-routing_request_obstacles.png" /></p>
<p>可以看到自动驾驶车辆能够对障碍物进行绕行
<img alt="图片描述" src="../assets/task0-obstacles_before.png" /></p>
<p>绕行时会出现
<center><img src="../assets/task0-obstacles_after.png" width = 400></center></p>
<p>（5）sim_control 调试技巧
如下图所示，打开pnc monitor，可以查看自动驾驶各模块具体详细数据以及可视化图表。
<img alt="图片描述" src="../assets/task0-pnc_monitor.png" /></p>
<p>点击任务栏 Route Editing &gt; 点击 Add Default Routing &gt; 在地图上设置起点与终点 &gt; 再次点击 Add Default Routing，在弹出的对话框中为该场景命名，我们为静态障碍物绕行的场景命名为 【nudge】 ，命名完成后点击 save 保存。
<img alt="图片描述" src="../assets/task0-default_routing.png" /></p>
<h1 id="12">任务1：静止障碍物绕行（2学时）</h1>
<h2 id="_5">实验概述</h2>
<p>在任务1-3当中，我们已经掌握了Apollo的基本操作流程。在接下来的实验二至实验五中，我们将选择一些百度Apollo提供的典型仿真测试场景作为实验的主要内容。通过这些实验，我们将深入了解Apollo规划模块的运作方式，并通过适当的代码修改来探索该模块的基本工作原理和代码结构。</p>
<p>在这一系列实验中，我们将不仅仅局限于理论的学习，还将通过实际的代码操作和修改来加深我们对Apollo规划模块的理解。通过对典型仿真测试场景的实际应用，我们将能够更加直观地感受到规划模块在自动驾驶系统中的关键作用。</p>
<p>通过逐步完成这些实验，我们将能够逐渐掌握如何操作Apollo的规划模块，从而在真实道路环境中更好地实现自动驾驶车辆的路径规划和决策过程。</p>
<h2 id="_6">实验内容</h2>
<p>如下方示意图所示，自动驾驶车辆可以完成静止障碍物的绕行任务。</p>
<p>实验要求：请通过修改Apollo planning相关代码完成：
<center><img src="../assets/task1.png" width = 400></center></p>
<p>（1）经过障碍物车速不超过10km/h</p>
<p>（2）经过障碍物时自动驾驶车辆与静止车辆的横向距离不少于1m（自动驾驶车辆与障碍物车辆质心距离不少于3m）</p>
<h3 id="_7">具体步骤</h3>
<ol>
<li>在dreamview 地图中找到静止障碍物场景的设置位置（坐标752206.37,2566012.56附近），并通过设置起始点路由，观察默认情况下Apollo对于静止障碍物绕行的情况（重点观察经过静止障碍物时的车速以及与障碍物的横向距离）
<img alt="图片描述" src="../assets/task1-before.png" />
<img alt="图片描述" src="../assets/task1-before2.png" /></li>
<li>
<p>进入Apollo工程根目录，并找到planning配置文件,配置文件所在路径：
<code>/apollo/modules/planning/conf/planning_config.pb.txt</code></p>
</li>
<li>
<p>在文件中修改配置项<code>static_obs_nudge_speed_ratio</code>的值，建议阈值修改为<code>0.1</code>
<img alt="图片描述" src="../assets/task1-config.png" /></p>
</li>
<li>
<p>在Apollo工程目录里，找到planning配置项，对应路径：
<code>/apollo/modules/planning/conf/planning.conf</code>
在配置文件最后增加配置项：
<code>--obstacle_lat_buffer=1</code>
<img alt="图片描述" src="../assets/task2-config2.png" /></p>
</li>
<li>按照任务0中模块开启部分的介绍，在dreamview中【module controller】里关闭并重新开启planning功能模块, 重新设定自动驾驶路由任务，观察自动驾驶修改配置后的表现。
<img alt="图片描述" src="../assets/task1-after.png" /></li>
</ol>
<h1 id="22">任务2：人行横道行人让行（2学时）</h1>
<h2 id="_8">实验内容</h2>
<p>如下方示意图所示，自动驾驶车辆可以在人行横道处等待行人通过。
<center><img src="../assets/task2.png" width = 400></center></p>
<p>实验要求：主车向前行驶，前方遇到有人通过人行道，主车需要停止分别在人行道前10m，5m，1m内停车。</p>
<h3 id="_9">具体步骤</h3>
<ol>
<li>在dreamview 地图中找到人行横道行人让行场景的设置位置(对应地图左上角区域，坐标750984.72.2565794.57)
<img alt="图片描述" src="../assets/task2-before.png" />
<img alt="图片描述" src="../assets/task2-before2.png" /></li>
<li>在Apollo工程目录里，找到关于交通规则配置文件对应的路径：
<code>/apollo/modules/planning/conf/traffic_rule_config.pb.txt</code></li>
<li>修改对应配置项，<code>stop_distance</code>分别为<code>1</code>，<code>5</code>以及<code>10</code>
<img alt="图片描述" src="../assets/task2-config.png" /></li>
<li>按照任务0中模块开启部分的介绍，在dreamview中【module controller】里关闭并重新开启planning功能模块, 重新设定自动驾驶路由任务，观察自动驾驶修改配置后的表现。
<img alt="图片描述" src="../assets/task2-after.png" /></li>
</ol>
<h1 id="3-2">任务3：慢速车绕行 （2学时）</h1>
<h2 id="_10">实验内容</h2>
<p>如下方示意图所示，自动驾驶车辆需要根据前方慢行车辆状态，执行对应不同决策。</p>
<p><center><img src="../assets/task3.png" width = 400></center></p>
<p>实验要求：当前方车辆速度大于3 m/s 时，自动驾驶主车选择跟随前车行驶；当前方车速度小于3m/s，自动驾驶主车选择对前车绕行。</p>
<h3 id="_11">具体步骤</h3>
<ol>
<li>在dreamview 地图中找到慢速车绕行场景的设置位置(对应地图右侧区域，坐标754106.67,2565052.38)</li>
</ol>
<p>跟车时状态:</p>
<p><center><img src="../assets/task3-follow.png" width = 600></center></p>
<ol>
<li>在Apollo工程目录里，找到planning配置项，对应路径：
<code>/apollo/modules/planning/conf/planning.conf</code>
在配置文件最后增加配置项：
<div class="highlight"><pre><span></span><code>--static_obstacle_speed_threshold=3.0
--obstacle_lat_buffer=1.50
</code></pre></div></li>
<li>在Apollo工程目录里，找到关于planning的源码，对应路径：
<div class="highlight"><pre><span></span><code>/apollo/modules/planning/tasks/deciders/utils/path_decider_obstacle_utils.cc 
</code></pre></div>
代码第39行，修改判断逻辑：
<div class="highlight"><pre><span></span><code>if (!obstacle.IsStatic() ||
      obstacle.speed() &gt; FLAGS_static_obstacle_speed_threshold) {
    return false;
  }
</code></pre></div>
去掉<code>!obstacle.IsStatic()</code>,修改为：
<div class="highlight"><pre><span></span><code>if (obstacle.speed() &gt; FLAGS_static_obstacle_speed_threshold) {
    return false;
  }
</code></pre></div></li>
<li>执行完上述操作，需要重新编译源码。在根目录下，重新执行一次代码编译：
<div class="highlight"><pre><span></span><code>./apollo.sh build
</code></pre></div>
并使用命令重启dreamview
<div class="highlight"><pre><span></span><code>root@in-dev-docker:/apollo# ./scripts/bootstrap.sh restart
</code></pre></div></li>
<li>重新执行慢速车绕行场景路由任务</li>
</ol>
<p><center><img src="../assets/task3-nudge.png" width = 600></center></p>




<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Comment system -->



                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 - 2024 哈尔滨工业大学（深圳）
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.6c14ae12.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>